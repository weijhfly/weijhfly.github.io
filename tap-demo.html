<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1.0, user-scalable=0">
	<title>tap demo</title>
	<style type="text/css">
		h4{margin: 10px 0;}
	</style>
</head>
<body>
	<h3>直接调用</h3>
	<div>
		<button class="button">tap1</button>
		<button class="button">tap2</button>
		<button class="button">tap3</button>
		<button class="button">tap4</button>
		<button class="button">tap5</button>
	</div>
	<hr>
	<h3>事件委托</h3>
	<div id="test">
		<button class="button2">tap1</button>
		<button class="add">add</button>
		<button class="doc">document</button>
	</div>
	<hr>
	<h3>事件冒泡</h3>
	<h4>正常冒泡</h4>
	<div id="parent">
		parent<br><br>
		<button class="son">son</button>
	</div>
	<h4>阻止冒泡</h4>
	<div id="parent2">
		parent2<br><br>
		<button class="son2">son2</button>
	</div>
	<h3>阻止默认动作</h3>
	<a href="无法跳转" class="a1">无法跳转</a>
	<h4>快速跳转</h4>
	<div class="a-box">
		<a href="https://github.com/weijhfly/tap" class="a2">快速跳转</a>
		<a href="https://github.com/weijhfly/tap" class="a2">快速跳转</a>
		<a href="https://github.com/weijhfly/tap" class="a2">快速跳转</a>
	</div>
	<!-- layer.js仅做弹出演示 -->
	<script src="js/layer/layer.js"></script>
	<script src="js/tap.js?v=3"></script>
	<script>
		//直接调用
tap('.button',function(e){
	console.log(e);
	var event = "ontouchend" in document? 'tap':'click';
	layer.msg(event+' : '+this.innerText);
})
// 事件委托 event delegation
tap('#test','.button2',function(){
	var event = "ontouchend" in document? 'tap':'click';
	layer.msg(event+' : '+this.innerText);
})
var i = 0;
tap('#test','.add',function(e){
	console.log(e);
	i ++;
	var test = document.getElementById("test");
	var button = document.createElement("button");
	button.className = 'button2';
	button.innerHTML = "button "+i;
	test.insertBefore(button,test.childNodes[0]); 
})
tap(document,'.doc',function(){
	layer.msg('doc');
})
/*
阻止冒泡 true stop propagation
在事件委托中仅能阻止委托元素对上层的冒泡
*/
tap('#parent',function(){
	setTimeout(function() {
		layer.msg('parent');
	}, 100);
})
tap('.son',function(){
	layer.msg('son');
})
// 阻止冒泡
tap('#parent2',function(){
	setTimeout(function() {
		layer.msg('parent2');
	}, 100);
})
tap('.son2',function(e){
	e.stopPropagation();
	layer.msg('son2');
})
/*
阻止默认动作
同上，事件委托中仅能阻止委托元素的默认动作
*/
tap('.a1',function(e){
	e.preventDefault();
	console.log('无法跳转');
})
//快速跳转-事件委托
tap(document,'.a2',function(){
	window.location = this.href;
});
	</script>
</body>
</html>
